{% extends 'ecomm/index.html' %}
{% load static %}
{% block title %} Cart | Ecomm.in {% endblock title %}

{% block content %}
<div class="container my-3">
    {% if items %}
    <div class="row">
        <div class="col-12 col-md-8">
            <h5>Shopping Cart</h5>
            <hr/>
            <div class="list-group">
                {% for item in items %}
                <div  class="list-group-item list-group-item-action mb-3" aria-current="true">
                    <div class="d-flex w-100 justify-content-between row">
                        <img class="img-thumbnail d-none d-md-block" style="max-height: 150px; max-width: 75px" src="{{ item.product.image.url }}" alt="">
                        <div class="col mx-3">
                            <a class="text-decoration-none d-flex-inline" href="{% url 'product-details' item.product.id %}"><h6 class="mb-1">{{ item.product.title }}</h6></a>
                            <div class="btn-group mt-3">
                                <button data-product={{item.product.id}} data-action="remove" class="btn btn-outline-primary btn-sm update-cart"><i class="bi bi-dash"></i></button>
                                <!-- <input readonly value="{{ item.quantity }}" style="max-width: 50px;" type="number"> -->
                                <button data-product={{item.product.id}} data-action="add" class="btn btn-outline-primary btn-sm update-cart"><i class="bi bi-plus"></i></button>
                            </div>
                        </div>
                        <div class="col-12 mx-3 mt-2">
                            <small>Quantity: {{ item.quantity }}</small>
                            <strong class="ms-5">&#8377; {{item.get_total}} </strong>
                        </div>
                    </div>
                    
                </div>
                {% endfor %}
                
            </div>
        </div>
        <div class="col-12 col-md-4">
            <div class="card">
                <div class="card-body">
                    <div class="d-flex flex-row">
                        <div class="col">
                            <div>
                            <strong>Cart Total</strong>
                            <p>{{ cart.get_cart_total|floatformat:2 }}</p>
                        </div>
                        </div>
                        
                        <div class="col text-align-right">
                            <strong>Total items</strong>
                            <p>{{ cart.get_cart_quantity }}</p>
                        </div>
                    </div>
                </div>
                <div class="card-footer">
                    <a href="{% url 'order-checkout' %}" class="btn btn-primary">Proceed to Checkout</a>
                </div>
            </div>
        </div>
    </div>
    {% else %}
    <div class="row">
        <div class="col">
            <div class="card">
                <div class="card-body mx-auto">
                    <div class="container">
                    <img style="max-height: 150px; max-width: 220; " src="{% static 'images/emptycart.png' %}" alt="Empty cart">
                    </div>
                    {% if request.user %}
                        <strong>Oh snap your cart is empty, start shopping </strong>
                    {% else %}
                        <small>Missing cart items? login to see</small>
                    <a class="btn btn-primary" href="{% url 'login' %}">Login</a>
                    {% endif %}
                </div>
            </div>
        </div>
    </div>
    {% endif %}
</div>
{% endblock content %}